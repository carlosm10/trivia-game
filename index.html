<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>El Camino a Cristo - Game</title>
  <style>
    html, body {
      font-family: Arial, sans-serif;
      background: #efedfe;
      color: #6f67b6;
      text-align: center;
      margin: 0;
      position: relative;
      height: 100%;
    }
    h1 {
      margin: 20px 0;
      font-size: 4rem;
    }
    #header{
      display: flex;
      align-items: center;
      justify-content: center; /* keeps title centered overall */
      gap: 16px;
      padding: 16px 24px;
      min-height: 15%;       /* extra space at top for title+logo */
    }
    #logo{
      width: 64px;
      height: 64px;
      object-fit: contain;
    }
    #image1{
        max-height: 10px;
        max-width: 10px;
    }
    /* 10 columns × 3 rows */
    #board {
      display: grid;
      grid-template-columns: repeat(10, 1fr);  /* 10 across */
      grid-auto-rows: 1fr;                     /* 3 rows driven by content */
      gap: 10px;
      width: 95%;
      margin: 0 auto 16px auto;
      /* max-width: 1400px; */
      min-width: 90%;
      min-height: 60%;
    }
    /* Keep tiles square and responsive */
    .tile {
      background: #8a7ef5;
      color: white;
      border: 2px solid #fff;
      border-radius: 10px;
      padding: 0;                /* remove padding so squares stay true */
      font-size: 4.5em;
      cursor: pointer;
      transition: background 0.3s;
      aspect-ratio: 1 / 1;       /* perfect squares */
      display: grid;
      place-items: center;       /* center the number */
    }
    .tile.used {
      background: #f7f5ff;
      color: #555;
      cursor: not-allowed;
      opacity: 0.4;
    }
    #questionBox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #efedfe;
      color: white;
      z-index: 1000;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    #questionType{
      font-size: 4em;
      margin: 10px;
      max-width: 80%;
      color: black;
      /* border: solid; */
      /* padding: 10px; */
    }
    #questionText {
      font-size: 4em;
      margin: 20px;
      max-width: 80%;
      color: #6f67b6;
      /* border: solid; */
      padding: 10px;
    }
    #possibleAnswers{
      font-size: 4em;
      margin: 10px;
      max-width: 80%;
      color: #6f67b6;
      /* border: solid; */
      padding: 5px;
      list-style: none;
    }
    #answerText {
      font-size: 4em;
      margin: 20px;
      border: solid;
      max-width: 80%;
      color: #8a7ef5;
      padding: 5px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #seeAnswerBtn {
      background: #6f67b6;
      color: white;
    }
    #closeBtn {
      background: #6f67b6;
      color: white;
      margin-top: 40px;
    }
    #resetBtn {
      background: #6f67b6;
      color: white;
      margin: 20px;
      /* margin-top: 40px; */
    }
    #footer {
      font-size: x-small;
      min-height: 20%;
    }

    /* ===== Answer-view layout & typography ===== */
    #questionBox.answer-mode {
      display: flex;                 /* already flex; reinforcing */
      flex-direction: column;
      justify-content: space-around;/* top question / middle answer / bottom button */
      align-items: center;
      /* padding: 40px 24px; */
      gap: 24px;
    }

    /* Question at the top */
    #questionBox.answer-mode #questionText {
      font-size: 20px;               /* per spec */
      line-height: 1.3;
      margin: 0;
      color: #000;                   /* readable */
      text-align: center;
    }

    /* Big centered answer in the middle */
    #questionBox.answer-mode #answerText {
      display: block !important;     /* ensure it's visible */
      font-size: 35px;               /* per spec */
      font-weight: 800;
      text-align: center;
      color: #000;
      border: none;                  /* remove previous border */
      margin: 0 auto;                /* keep centered */
      max-width: 90%;
    }

    /* Hide options when in answer mode */
    #questionBox.answer-mode #possibleAnswers {
      display: none !important;
    }

    /* Close button at the bottom */
    #questionBox.answer-mode #closeBtn {
      display: inline-block !important;
      align-self: center;
      margin-top: 24px;
      margin-bottom: 16px;
    }

    /* Hide the 'Ver Respuesta' button in answer mode */
    #questionBox.answer-mode #seeAnswerBtn {
      display: none !important;
    }

    /* ===== Universal white background + black text while viewing Q/A ===== */
    #questionBox.question-mode,
    #questionBox.answer-mode {
      background: #fff !important;
      color: #000 !important;
    }

    /* ===== Base layout for QUESTION view (before seeing the answer) ===== */
    #questionBox.question-mode {
      display: flex;               /* ensure visible */
      flex-direction: column;
      align-items: center;
      justify-content: space-around;
      /* padding: 30px; */
      gap: 10px;
    }

    /* Top-left type label (all types) */
    #questionBox.question-mode #questionType {
      font-size: 2.5rem;
      color: #808080;              /* gray */
      text-align: left;
    }

    /* Central question text (types 1–3 and 4) */
    #questionBox.question-mode #questionText {
      font-size: 35px;
      font-weight: 800;
      text-align: center;          /* Types 1–3 centered; type 4 is centered too */
      margin: 0 auto;
      max-width: 90%;
    }

    /* Main question */
    #questionBox.question-mode #questionText,
    #questionBox.answer-mode #answerText {
      font-size: 4rem;
      line-height: 1.2;
      word-wrap: break-word;
    }

    /* Options list — only for type 4 (left-aligned, bold 25px) */
    #questionBox.question-mode.type-4 #possibleAnswers {
      /* display: block !important; */
      align-self: center;
      list-style: none;
      padding: 0;
      margin: 8px clamp(16px, 5vw, 48px) 0;
      max-width: 90%;
      text-align: left;
    }
    #questionBox.question-mode.type-4 #possibleAnswers li {
      font-size: 2.5rem;
      line-height: 1.2;
      word-wrap: break-word;
      font-weight: 700;
      margin: 8px 0;
    }

    /* Hide options for types 1–3 */
    #questionBox.question-mode:not(.type-4) #possibleAnswers {
      display: none !important;
    }

    /* Buttons in question mode */
    #questionBox.question-mode #seeAnswerBtn {
      display: inline-block;
      align-self: center;
      margin-top: 24px;
    }
    #questionBox.question-mode #closeBtn,
    #questionBox.question-mode #answerText {
      display: none !important;    /* only visible in answer mode */
    }
    #questionBox.answer-mode #questionText {
      font-size: 3.5rem;
      line-height: 1.3;
      margin: 0;
      color: #808080;
      text-align: center;
      font-weight: bolder;
    }
    #questionBox.answer-mode #answerText {
      display: block !important;
      font-size: 5rem;
      font-weight: 800;
      text-align: center;
      color: #6f67b6;
      border: none;
      margin: 0 auto;
      max-width: 90%;
    }
    #questionBox.answer-mode #possibleAnswers { display: none !important; }
    #questionBox.answer-mode #closeBtn { display: inline-block !important; }
    #questionBox.answer-mode #seeAnswerBtn { display: none !important; }

    #welcomeDialog {
      position: fixed; /* Or 'absolute' depending on desired behavior */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      /* background-color: rgba(0, 0, 0, 0.5); */
      color: white;
      /* display: flex; */
      justify-content: center;
      align-items: center;
      flex-direction: column;
      gap: 1rem;               /* Adds space between <p> and <button> */
      padding: 20px;
      background-color: #6f67b6;
      border-radius: 10px;
      z-index: 1000; /* Ensure it's above other elements */
    }

  </style>
</head>
<body>
  <div id="welcomeDialog" style="display: none;">
    <p>CONCURSO EL CAMINO A CRISTO</p>
    <button id="startBtn" onclick="closeDialog()">Empezar</button>    
  </div>
  <div id="header">
    <img id="logo" src="IMG_2352.PNG" alt="Logo de El Camino a Cristo" />
    <h1 id="title">El Camino a Cristo</h1>
  </div>
  <!-- Board visible at start -->
  <div id="board"></div>

  <!-- Fullscreen Question Box -->
  <div id="questionBox">
    <p id="questionType"></p>
    <p id="questionText"></p>
     <ul id="possibleAnswers" style="display:none;">
      <li id="answerA"></li>
      <li id="answerB"></li>
      <li id="answerC"></li>
      <li id="answerD"></li>
     </ul>
    <p id="answerText" style="display:none;"></p>
    <button id="seeAnswerBtn" onclick="seeAnswer()">Ver Respuesta</button>
    <button id="closeBtn" style="display:none;" onclick="closeQuestion()">Cerrar Pregunta</button>
  </div>
  <footer>
    <button id="resetBtn" onclick="resetGame()">Reiniciar Juego</button>
    <p id="footer">&copy; 2025  <span class="made-with-love">Made with &#x2764; by Carlos & Esli</span> for Seventh Day Adventist Church use.
    </p>
  </footer>
  <script src="preguntas.js" type="text/javascript"></script>
  <!-- <script src="preguntas-desempate.js" type="text/javascript"></script> -->
  <script>
    const welcomeDialog = document.getElementById("welcomeDialog");
    // Load saved progress or start fresh
    let gameData = JSON.parse(localStorage.getItem("numberedQuiz")) || [...defaultData];
    function showDialog() {
      let gameStatus = localStorage.getItem("gameStarted");
      if(gameStatus == null || gameStatus == "false" ){
        welcomeDialog.style.display = "flex";
      } 
    }

    function closeDialog(){
      localStorage.setItem("gameStarted", true);
      welcomeDialog.style.display = "none";
    }

    function saveProgress() {
      localStorage.setItem("numberedQuiz", JSON.stringify(gameData));
    }

    function renderBoard() {
      const board = document.getElementById("board");
      board.innerHTML = "";

      gameData.forEach((item, i) => {
        let tile = document.createElement("div");
        tile.className = "tile";
        tile.innerText = i + 1;
        tile.setAttribute("id", i + 1);

        if (item === null) {
          tile.classList.add("used");
        } else {
          tile.onclick = () => showQuestion(i, tile);
        }
        board.appendChild(tile);
      });
    }

    let currentIndex = null;

    function showQuestion(index, tile) {
      if (!gameData[index]) return;
      currentIndex = index;

      const qBox = document.getElementById("questionBox");
      const qTypeEl = document.getElementById("questionType");
      const qTextEl = document.getElementById("questionText");
      const ansTextEl = document.getElementById("answerText");
      const possEl = document.getElementById("possibleAnswers");
      const seeBtn = document.getElementById("seeAnswerBtn");
      const closeBtn = document.getElementById("closeBtn");

      // Set content
      const item = gameData[index];
      const qType = item.type || 1;

      qTypeEl.innerText = item.instruction || "";        // top-left gray label
      qTextEl.innerText = item.pregunta || "";           // central big question
      ansTextEl.innerText = item.respuesta || "";        // will show in answer-mode

      // Options (type 4)
      if (qType === 4 && Array.isArray(item.opciones)) {
        const [a,b,c,d] = item.opciones;
        document.getElementById("answerA").innerText = a || "";
        document.getElementById("answerB").innerText = b || "";
        document.getElementById("answerC").innerText = c || "";
        document.getElementById("answerD").innerText = d || "";
        possEl.style.display = "block"; // CSS may override per mode
      } else {
        possEl.style.display = "none";
      }

      // Ensure we're in "question mode" (not answer mode)
      qBox.classList.remove("answer-mode","type-1","type-2","type-3","type-4");
      qBox.classList.add("question-mode", `type-${qType}`);

      // Button visibility for question view
      ansTextEl.style.display = "none";
      seeBtn.style.display = "inline-block";
      closeBtn.style.display = "none";

      // Show overlay, hide board
      document.getElementById("board").style.display = "none";
      qBox.style.display = "flex";

      // Mark tile as used and persist
      // gameData[index] = null;
      // tile.classList.add("used");
      // saveProgress();
    }

    function seeAnswer() {
      // Show answer text
      document.getElementById("answerText").style.display = "block";
      // Hide possible answers (if any) and the 'see answer' button
      document.getElementById("possibleAnswers").style.display = "none";
      document.getElementById("seeAnswerBtn").style.display = "none";
      // Ensure close button is visible
      document.getElementById("closeBtn").style.display = "inline-block";

      // Apply "answer mode" layout (top question, big middle answer, bottom close)
      document.getElementById("questionBox").classList.add("answer-mode");
    }

    function closeQuestion() {
      // Exit answer mode layout
      document.getElementById("questionBox").classList.remove("answer-mode");

      // Hide the overlay and return to board
      document.getElementById("questionBox").style.display = "none";
      document.getElementById("board").style.display = "grid";

      // Reset buttons/visibility for the next question view
      document.getElementById("answerText").style.display = "none";
      document.getElementById("seeAnswerBtn").style.display = "inline-block";
      document.getElementById("closeBtn").style.display = "none";
    }

    function resetGame() {
      if (!confirm("Esta seguro de reiniciar el juego? Todas las preguntas volveran a ser habilitadas.")) return;
      gameData = [...defaultData];
      localStorage.removeItem("numberedQuiz");
      localStorage.removeItem("showDialog");
      localStorage.setItem("gameStarted", false);
      saveProgress();
      showDialog();
      renderBoard();
      document.getElementById("questionBox").style.display = "none";
      document.getElementById("board").style.display = "grid";
    }

    function backToNormal(){
        renderBoard();
        document.getElementById("backToGame").style.display = "none";
    }

    // Initialize
    showDialog();
    renderBoard();
  </script>
</body>
</html>
